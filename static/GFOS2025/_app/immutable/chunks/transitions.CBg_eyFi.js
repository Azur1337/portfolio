import{E as q,af as z,ag as B,a0 as G,_ as M,ah as P,G as R,ai as U,F as g,e as b,aj as x,ak as K,al as y,am as C,R as W}from"./utils.BMz8UlWh.js";import{i as D}from"./disclose-version.D37112kg.js";const H=()=>performance.now(),h={tick:i=>requestAnimationFrame(i),now:()=>H(),tasks:new Set};function L(){const i=h.now();h.tasks.forEach(a=>{a.c(i)||(h.tasks.delete(a),a.f())}),h.tasks.size!==0&&h.tick(L)}function J(i){let a;return h.tasks.size===0&&h.tick(L),{promise:new Promise(r=>{h.tasks.add(a={c:i,f:r})}),abort(){h.tasks.delete(a)}}}function N(i,a){i.dispatchEvent(new CustomEvent(a))}function Q(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const a=i.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function S(i){const a={},r=i.split(";");for(const t of r){const[v,d]=t.split(":");if(!v||d===void 0)break;const c=Q(v.trim());a[c]=d.trim()}return a}const V=i=>i;function Z(i,a,r,t){var v=(i&P)!==0,d=(i&x)!==0,c=v&&d,m=(i&K)!==0,F=c?"both":v?"in":"out",l,o=a.inert,n,e;function E(){var s=W,k=R;y(null),C(null);try{return l??(l=r()(a,(t==null?void 0:t())??{},{direction:F}))}finally{y(s),C(k)}}var T={is_global:m,in(){var s;if(a.inert=o,!v){e==null||e.abort(),(s=e==null?void 0:e.reset)==null||s.call(e);return}d||n==null||n.abort(),N(a,"introstart"),n=p(a,E(),e,1,()=>{N(a,"introend"),n==null||n.abort(),n=l=void 0})},out(s){if(!d){s==null||s(),l=void 0;return}a.inert=!0,N(a,"outrostart"),e=p(a,E(),n,0,()=>{N(a,"outroend"),s==null||s()})},stop:()=>{n==null||n.abort(),e==null||e.abort()}},f=R;if((f.transitions??(f.transitions=[])).push(T),v&&D){var _=m;if(!_){for(var u=f.parent;u&&u.f&q;)for(;(u=u.parent)&&!(u.f&z););_=!u||(u.f&B)!==0}_&&G(()=>{M(()=>T.in())})}}function p(i,a,r,t,v){var d=t===1;if(U(a)){var c,m=!1;return g(()=>{if(!m){var _=a({direction:d?"in":"out"});c=p(i,_,r,t,v)}}),{abort:()=>{m=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(a!=null&&a.duration))return v(),{abort:b,deactivate:b,reset:b,t:()=>t};const{delay:F=0,css:l,tick:o,easing:n=V}=a;var e=[];if(d&&r===void 0&&(o&&o(0,1),l)){var E=S(l(0,1));e.push(E,E)}var T=()=>1-t,f=i.animate(e,{duration:F});return f.onfinish=()=>{var _=(r==null?void 0:r.t())??1-t;r==null||r.abort();var u=t-_,s=a.duration*Math.abs(u),k=[];if(s>0){if(l)for(var I=Math.ceil(s/16.666666666666668),A=0;A<=I;A+=1){var O=_+u*n(A/I),j=l(O,1-O);k.push(S(j))}T=()=>{var w=f.currentTime;return _+u*n(w/s)},o&&J(()=>{if(f.playState!=="running")return!1;var w=T();return o(w,1-w),!0})}f=i.animate(k,{duration:s,fill:"forwards"}),f.onfinish=()=>{T=()=>t,o==null||o(t,1-t),v()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=b)},deactivate:()=>{v=b},reset:()=>{t===0&&(o==null||o(1,0))},t:()=>T()}}export{Z as t};
