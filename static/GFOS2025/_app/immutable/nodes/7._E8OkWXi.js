import{s as We,e as Q,a as t,t as h,c as je,d as f,b as i}from"../chunks/disclose-version.D37112kg.js";import{p as Se,ac as Be,ad as tt,f as d,a as Le,o as A,aa as at,k as a,c as q,r as G,t as u,ae as st,q as gt,n as g,s as n,m as ye,a5 as Ue,l as Xe}from"../chunks/utils.BMz8UlWh.js";import{e as rt,i as ot}from"../chunks/each.g6nCvagJ.js";import{c as r}from"../chunks/svelte-component.DFf4Dkb-.js";import{l as we,p as xe,i as pt,s as ft,a as $e,o as ht}from"../chunks/index-client.BivCp4uE.js";import{g as Pt,R as Ze,T as bt,a as Ie}from"../chunks/index.DUVY81Ag.js";import{C as Ne,a as Ke}from"../chunks/card-content.BBvnb9Uj.js";import{C as Oe,a as Fe,b as He}from"../chunks/card-title.Bi5X-Lan.js";import{i as Ae}from"../chunks/legacy.D-WTFwhj.js";import{s as ke,a as lt,c as qe,$ as nt}from"../chunks/utils.B1FHb5pb.js";import{R as xt,T as Tt,a as yt,P as wt,b as Dt,c as St,d as Lt,e as Ct,f as Mt,g as Et,C as kt}from"../chunks/command-list.CMbr50rI.js";import{a as At,B as Rt}from"../chunks/index.C0gpBWf0.js";import{L as Ut}from"../chunks/label.C5RKwiV8.js";import{T as It,a as Nt,b as et,c as Me,d as Kt,e as Ee}from"../chunks/table-row.D_WHKuQ4.js";import{f as Ot,p as Ft}from"../chunks/parse.DxUyzabH.js";import{L as ve,b as Ht}from"../chunks/staticData.DXXv5A1x.js";import{b as Yt}from"../chunks/this.DvERBsQI.js";var zt=h("<div><!></div>");function Bt(re,$){const oe=we($,["children","$$slots","$$events","$$legacy"]),s=we(oe,["value","asChild","el"]);Se($,!1);const R=We(),v=()=>je(x,"$content",R),m=st();let U=xe($,"value",8),J=xe($,"asChild",8,!1),e=xe($,"el",28,()=>{});const{elements:{content:x},getAttrs:H}=Pt(),ce=H("content");Be(()=>(v(),at(U())),()=>{A(m,v()(U()))}),Be(()=>a(m),()=>{Object.assign(a(m),ce)}),tt(),Ae();var pe=Q(),fe=d(pe);{var le=P=>{var T=Q(),Y=d(T);ke(Y,$,"default",{get builder(){return a(m)}},null),t(P,T)},_e=P=>{var T=zt();let Y;var N=q(T);ke(N,$,"default",{get builder(){return a(m)}},null),G(T),Yt(T,V=>e(V),()=>e()),At(T,V=>{var X,z;return(z=(X=a(m)).action)==null?void 0:z.call(X,V)}),u(()=>Y=lt(T,Y,{...a(m),...s})),t(P,T)};pt(fe,P=>{J()?P(le):P(_e,!1)})}t(re,pe),Le()}var Wt=h("<caption><!></caption>");function jt(re,$){const oe=we($,["children","$$slots","$$events","$$legacy"]),s=we(oe,["class"]);Se($,!1);let R=xe($,"class",8,void 0);Ae();var v=Wt();let m;var U=q(v);ke(U,$,"default",{},null),G(v),u(()=>m=lt(v,m,{class:qe("text-muted-foreground mt-4 text-sm",R()),...s})),t(re,v),Le()}function Ye(re,$){const oe=we($,["children","$$slots","$$events","$$legacy"]),s=we(oe,["class","value"]);Se($,!1);let R=xe($,"class",8,void 0),v=xe($,"value",8);Ae();var m=gt(()=>qe("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",R()));Bt(re,ft({get class(){return a(m)},get value(){return v()}},()=>s,{children:(U,J)=>{var e=Q(),x=d(e);ke(x,$,"default",{},null),t(U,e)},$$slots:{default:!0}})),Le()}var qt=h("<!> <!> <!> <!>",1),Gt=h("<!> <!> <!> <!>",1),Qt=h("<!> <!> <!>",1);function ze(re,$){Se($,!1);const oe=We(),s=()=>je(nt,"$t",oe),R=st();let v=xe($,"logs",8);const m=[{regex:/User (\S+) (\S+) created a new transaction with amount (\S+)/,translationKey:"logs.created_transaction_message",valueMapper:e=>({name:e[1],surname:e[2],amount:e[3]})},{regex:/User (\S+) (\S+) updated transaction with ID (\S+)/,translationKey:"logs.updated_transaction_message",valueMapper:e=>({name:e[1],surname:e[2],id:e[3]})},{regex:/User (\S+) (\S+) created a new appointment/,translationKey:"logs.created_appointment_message",valueMapper:e=>({name:e[1],surname:e[2]})},{regex:/User (\S+) (\S+) created a new customer with email (\S+)/,translationKey:"logs.created_customer_message",valueMapper:e=>({name:e[1],surname:e[2],email:e[3]})},{regex:/User (\S+) (\S+) updated customer with ID (\S+)/,translationKey:"logs.updated_customer_message",valueMapper:e=>({name:e[1],surname:e[2],id:e[3]})},{regex:/User (\S+) (\S+) deleted customer with ID (\S+)/,translationKey:"logs.deleted_customer_message",valueMapper:e=>({name:e[1],surname:e[2],id:e[3]})},{regex:/User (\S+) (\S+) updated appointment with ID (\S+)/,translationKey:"logs.updated_appointment_message",valueMapper:e=>({name:e[1],surname:e[2],id:e[3]})},{regex:/User (\S+) (\S+) deleted appointment with ID (\S+)/,translationKey:"logs.deleted_appointment_message",valueMapper:e=>({name:e[1],surname:e[2],id:e[3]})},{regex:/User (\S+) (\S+) registered with email (\S+)/,translationKey:"logs.registered_user_message",valueMapper:e=>({name:e[1],surname:e[2],email:e[3]})}],U=e=>{for(const x of m){const H=e.match(x.regex);if(H){const ce=x.valueMapper(H);return s()(x.translationKey,{values:ce})}}return e},J=e=>{try{return Ot(Ft(e,"dd.MM.yyyy HH:mm:ss",new Date),"dd.MM.yyyy HH:mm")}catch(x){return console.error("Error parsing date:",x),e}};Be(()=>at(v()),()=>{A(R,[...v()].sort((e,x)=>new Date(x.timestamp).getTime()-new Date(e.timestamp).getTime()))}),tt(),Ae(),It(re,{children:(e,x)=>{var H=Qt(),ce=d(H);jt(ce,{children:(le,_e)=>{g();var P=f();u(()=>i(P,s()("logs.listOfLogs"))),t(le,P)},$$slots:{default:!0}});var pe=n(ce,2);Nt(pe,{children:(le,_e)=>{et(le,{children:(P,T)=>{var Y=qt(),N=d(Y);Me(N,{children:(K,ne)=>{g();var b=f();u(()=>i(b,s()("logs.timestamp"))),t(K,b)},$$slots:{default:!0}});var V=n(N,2);Me(V,{children:(K,ne)=>{g();var b=f();u(()=>i(b,s()("logs.userId"))),t(K,b)},$$slots:{default:!0}});var X=n(V,2);Me(X,{children:(K,ne)=>{g();var b=f();u(()=>i(b,s()("logs.type"))),t(K,b)},$$slots:{default:!0}});var z=n(X,2);Me(z,{children:(K,ne)=>{g();var b=f();u(()=>i(b,s()("logs.message"))),t(K,b)},$$slots:{default:!0}}),t(P,Y)},$$slots:{default:!0}})},$$slots:{default:!0}});var fe=n(pe,2);Kt(fe,{children:(le,_e)=>{var P=Q(),T=d(P);rt(T,1,()=>a(R),ot,(Y,N)=>{et(Y,{children:(V,X)=>{var z=Gt(),K=d(z);Ee(K,{children:(de,De)=>{g();var o=f();u(()=>i(o,J(a(N).timestamp))),t(de,o)},$$slots:{default:!0}});var ne=n(K,2);Ee(ne,{children:(de,De)=>{g();var o=f();u(()=>i(o,a(N).userId)),t(de,o)},$$slots:{default:!0}});var b=n(ne,2);Ee(b,{children:(de,De)=>{g();var o=f();u(()=>i(o,s()(`logs.${a(N).type.toLowerCase()}`))),t(de,o)},$$slots:{default:!0}});var Ce=n(b,2);Ee(Ce,{children:(de,De)=>{g();var o=f();u(()=>i(o,U(a(N).message))),t(de,o)},$$slots:{default:!0}}),t(V,z)},$$slots:{default:!0}})}),t(le,P)},$$slots:{default:!0}}),t(e,H)},$$slots:{default:!0}}),Le()}var Jt=h("<!> <!> <!>",1),Vt=h(" <!>",1),Xt=h("<!> <span> </span>",1),Zt=h("<!> <!>",1),ea=h("<!> <!>",1),ta=h("<!> <!>",1),aa=h("<!> <!>",1),sa=h("<!> <!>",1),ra=h("<!> <!>",1),oa=h("<!> <!>",1),la=h("<!> <!>",1),na=h("<!> <!>",1),da=h("<!> <!> <!>",1),ua=h('<main class="p-6"><div class="mb-6"><h1 class="text-2xl font-bold"> </h1> <p class="text-sm text-muted-foreground"> </p></div> <div class="flex flex-col sm:flex-row sm:items-end gap-4 mb-4"><div class="grow"><!></div> <div class="w-full sm:w-64"><div class="flex flex-col"><!> <!></div></div></div> <!></main>');function La(re,$){Se($,!0);const oe=We(),s=()=>je(nt,"$t",oe);let R=ye($e([])),v=ye("week"),m=ye(null),U=ye(!1),J=ye("");const e=[{label:"logs.registered_user",value:ve.REGISTERED_USER},{label:"logs.created_customer",value:ve.CREATED_CUSTOMER},{label:"logs.updated_customer",value:ve.UPDATED_CUSTOMER},{label:"logs.deleted_customer",value:ve.DELETED_CUSTOMER},{label:"logs.created_transaction",value:ve.CREATED_TRANSACTION},{label:"logs.updated_transaction",value:ve.UPDATED_TRANSACTION},{label:"logs.created_appointment",value:ve.CREATED_APPOINTMENT},{label:"logs.updated_appointment",value:ve.UPDATED_APPOINTMENT},{label:"logs.deleted_appointment",value:ve.DELETED_APPOINTMENT}],x=[{label:"logs.allLogs",value:null},...e];let H=ye($e(x));Ue(()=>{if(!a(J))A(H,$e(x));else{const o=x.filter(c=>s()(c.label).toLowerCase().includes(a(J).toLowerCase()));A(H,$e(o))}});const ce=o=>{const c=new Date;let l;switch(o){case"week":l=new Date(c),l.setDate(l.getDate()-7);break;case"month":l=new Date(c),l.setMonth(l.getMonth()-1);break;case"year":l=new Date(c),l.setFullYear(l.getFullYear()-1);break;default:l=new Date(c)}l.setHours(0,0,0,0);const me=new Date(c);return me.setHours(23,59,59,999),{startDate:l,endDate:me}},pe=()=>Ht.sort((c,l)=>new Date(l.timestamp).getTime()-new Date(c.timestamp).getTime()),fe=async(o,c)=>{const l=pe(),{startDate:me,endDate:I}=ce(o);A(R,$e(l.filter(Z=>{const ue=new Date(Z.timestamp),ie=c==null?!0:Z.type===c;return ue>=me&&ue<=I&&ie})))},le=()=>{if(a(m)===null)return s()("logs.allLogs");const o=e.find(c=>c.value===a(m));return o?s()(o.label):s()("logs.allLogs")};ht(()=>{fe(a(v),a(m))}),Ue(()=>{a(v)&&fe(a(v),a(m))}),Ue(()=>{fe(a(v),a(m))});var _e=ua(),P=q(_e),T=q(P),Y=q(T,!0);u(()=>i(Y,s()("logs.title"))),G(T);var N=n(T,2),V=q(N,!0);u(()=>i(V,s()("logs.description"))),G(N),G(P);var X=n(P,2),z=q(X),K=q(z);r(K,()=>Ze,(o,c)=>{c(o,{get value(){return a(v)},set value(l){A(v,$e(l))},children:(l,me)=>{var I=Q(),Z=d(I);r(Z,()=>bt,(ue,ie)=>{ie(ue,{class:"grid w-full grid-cols-3",children:(B,ee)=>{var te=Jt(),ae=d(te);r(ae,()=>Ie,(y,w)=>{w(y,{value:"week",$$events:{click:()=>A(v,"week")},children:(F,ge)=>{g();var p=f();u(()=>i(p,s()("logs.thisWeek"))),t(F,p)},$$slots:{default:!0}})});var k=n(ae,2);r(k,()=>Ie,(y,w)=>{w(y,{value:"month",$$events:{click:()=>A(v,"month")},children:(F,ge)=>{g();var p=f();u(()=>i(p,s()("logs.thisMonth"))),t(F,p)},$$slots:{default:!0}})});var O=n(k,2);r(O,()=>Ie,(y,w)=>{w(y,{value:"year",$$events:{click:()=>A(v,"year")},children:(F,ge)=>{g();var p=f();u(()=>i(p,s()("logs.thisYear"))),t(F,p)},$$slots:{default:!0}})}),t(B,te)},$$slots:{default:!0}})}),t(l,I)},$$slots:{default:!0}})}),G(z);var ne=n(z,2),b=q(ne),Ce=q(b);r(Ce,()=>Ut,(o,c)=>{c(o,{for:"logTypeFilter",class:"mb-2 hidden sm:block",children:(l,me)=>{g();var I=f();u(()=>i(I,s()("logs.filterByLogType"))),t(l,I)},$$slots:{default:!0}})});var de=n(Ce,2);r(de,()=>xt,(o,c)=>{c(o,{get open(){return a(U)},set open(l){A(U,$e(l))},children:(l,me)=>{var I=ta(),Z=d(I);r(Z,()=>Tt,(ie,B)=>{B(ie,{class:"w-full",id:"logTypeFilter",children:(ee,te)=>{Rt(ee,{variant:"outline",class:"w-full justify-between",role:"combobox",get"aria-expanded"(){return a(U)},children:(ae,k)=>{g();var O=Vt(),y=d(O);u(()=>i(y,`${s()(le())??""} `));var w=n(y);yt(w,{class:"opacity-50 h-4 w-4 ml-2"}),t(ae,O)},$$slots:{default:!0}})},$$slots:{default:!0}})});var ue=n(Z,2);r(ue,()=>wt,(ie,B)=>{B(ie,{class:"w-[250px] p-0",children:(ee,te)=>{var ae=Q(),k=d(ae);r(k,()=>Dt,(O,y)=>{y(O,{children:(w,F)=>{var ge=ea(),p=d(ge),se=Xe(()=>s()("logs.searchLogType"));r(p,()=>St,(D,S)=>{S(D,{get placeholder(){return a(se)},get value(){return a(J)},set value(L){A(J,$e(L))}})});var he=n(p,2);r(he,()=>Lt,(D,S)=>{S(D,{children:(L,Te)=>{var W=Zt(),j=d(W);r(j,()=>Ct,(C,M)=>{M(C,{children:(E,be)=>{g();var _=f();u(()=>i(_,s()("logs.noLogTypeFound"))),t(E,_)},$$slots:{default:!0}})});var Pe=n(j,2);r(Pe,()=>Mt,(C,M)=>{M(C,{children:(E,be)=>{var _=Q(),dt=d(_);rt(dt,17,()=>a(H),ot,(ut,Re)=>{var Ge=Q(),it=d(Ge);r(it,()=>Et,($t,vt)=>{vt($t,{onSelect:()=>{A(m,$e(a(Re).value)),A(U,!1),A(J,"")},children:(ct,ia)=>{var Qe=Xt(),Je=d(Qe),_t=Xe(()=>qe("mr-2 h-4 w-4",a(m)!==a(Re).value&&"text-transparent"));kt(Je,{get class(){return a(_t)}});var Ve=n(Je,2),mt=q(Ve,!0);u(()=>i(mt,s()(a(Re).label))),G(Ve),t(ct,Qe)},$$slots:{default:!0}})}),t(ut,Ge)}),t(E,_)},$$slots:{default:!0}})}),t(L,W)},$$slots:{default:!0}})}),t(w,ge)},$$slots:{default:!0}})}),t(ee,ae)},$$slots:{default:!0}})}),t(l,I)},$$slots:{default:!0}})}),G(b),G(ne),G(X);var De=n(X,2);r(De,()=>Ze,(o,c)=>{c(o,{get value(){return a(v)},children:(l,me)=>{var I=da(),Z=d(I);r(Z,()=>Ye,(B,ee)=>{ee(B,{value:"week",children:(te,ae)=>{var k=Q(),O=d(k);r(O,()=>Ne,(y,w)=>{w(y,{children:(F,ge)=>{var p=sa(),se=d(p);r(se,()=>Oe,(D,S)=>{S(D,{children:(L,Te)=>{var W=aa(),j=d(W);r(j,()=>Fe,(C,M)=>{M(C,{children:(E,be)=>{g();var _=f();u(()=>i(_,s()("logs.thisWeeksLogs"))),t(E,_)},$$slots:{default:!0}})});var Pe=n(j,2);r(Pe,()=>He,(C,M)=>{M(C,{children:(E,be)=>{g();var _=f();u(()=>i(_,s()("logs.logsFromPastWeek"))),t(E,_)},$$slots:{default:!0}})}),t(L,W)},$$slots:{default:!0}})});var he=n(se,2);r(he,()=>Ke,(D,S)=>{S(D,{children:(L,Te)=>{ze(L,{get logs(){return a(R)}})},$$slots:{default:!0}})}),t(F,p)},$$slots:{default:!0}})}),t(te,k)},$$slots:{default:!0}})});var ue=n(Z,2);r(ue,()=>Ye,(B,ee)=>{ee(B,{value:"month",children:(te,ae)=>{var k=Q(),O=d(k);r(O,()=>Ne,(y,w)=>{w(y,{children:(F,ge)=>{var p=oa(),se=d(p);r(se,()=>Oe,(D,S)=>{S(D,{children:(L,Te)=>{var W=ra(),j=d(W);r(j,()=>Fe,(C,M)=>{M(C,{children:(E,be)=>{g();var _=f();u(()=>i(_,s()("logs.thisMonthsLogs"))),t(E,_)},$$slots:{default:!0}})});var Pe=n(j,2);r(Pe,()=>He,(C,M)=>{M(C,{children:(E,be)=>{g();var _=f();u(()=>i(_,s()("logs.logsFromPastMonth"))),t(E,_)},$$slots:{default:!0}})}),t(L,W)},$$slots:{default:!0}})});var he=n(se,2);r(he,()=>Ke,(D,S)=>{S(D,{children:(L,Te)=>{ze(L,{get logs(){return a(R)}})},$$slots:{default:!0}})}),t(F,p)},$$slots:{default:!0}})}),t(te,k)},$$slots:{default:!0}})});var ie=n(ue,2);r(ie,()=>Ye,(B,ee)=>{ee(B,{value:"year",children:(te,ae)=>{var k=Q(),O=d(k);r(O,()=>Ne,(y,w)=>{w(y,{children:(F,ge)=>{var p=na(),se=d(p);r(se,()=>Oe,(D,S)=>{S(D,{children:(L,Te)=>{var W=la(),j=d(W);r(j,()=>Fe,(C,M)=>{M(C,{children:(E,be)=>{g();var _=f();u(()=>i(_,s()("logs.thisYearsLogs"))),t(E,_)},$$slots:{default:!0}})});var Pe=n(j,2);r(Pe,()=>He,(C,M)=>{M(C,{children:(E,be)=>{g();var _=f();u(()=>i(_,s()("logs.logsFromPastYear"))),t(E,_)},$$slots:{default:!0}})}),t(L,W)},$$slots:{default:!0}})});var he=n(se,2);r(he,()=>Ke,(D,S)=>{S(D,{children:(L,Te)=>{ze(L,{get logs(){return a(R)}})},$$slots:{default:!0}})}),t(F,p)},$$slots:{default:!0}})}),t(te,k)},$$slots:{default:!0}})}),t(l,I)},$$slots:{default:!0}})}),G(_e),t(re,_e),Le()}export{La as component};
