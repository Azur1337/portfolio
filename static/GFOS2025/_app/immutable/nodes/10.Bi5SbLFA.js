import{s as Ct,a as s,t as b,d as H,e as X,b as o,c as wt}from"../chunks/disclose-version.D37112kg.js";import{p as Tt,m as Y,t as v,a as St,o as Z,k as t,c as n,r as e,s as l,f as A,n as L,l as j}from"../chunks/utils.BMz8UlWh.js";import{a as q,o as Dt,i as Nt}from"../chunks/index-client.BivCp4uE.js";import{e as kt,i as At}from"../chunks/each.g6nCvagJ.js";import{c}from"../chunks/svelte-component.DFf4Dkb-.js";import{C as z,a as E}from"../chunks/card-content.BBvnb9Uj.js";import{C as G,a as J,b as nt}from"../chunks/card-title.Bi5X-Lan.js";import"../chunks/legacy.D-WTFwhj.js";import{B as Bt}from"../chunks/index.Q7XjfP4x.js";import{$ as Ft}from"../chunks/utils.B1FHb5pb.js";import{s as lt}from"../chunks/staticData.DXXv5A1x.js";var It=b("<!> <!>",1),Ht=b('<div class="space-y-2"><p class="text-sm text-muted-foreground"><strong> </strong> </p> <p class="text-sm text-muted-foreground"><strong> </strong> </p></div>'),Lt=b("<!> <!>",1),Mt=b('<div class="mb-8"><h1 class="text-2xl font-bold mb-4"> </h1> <!></div>'),Rt=b('<p class="text-2xl font-bold"> </p>'),Ut=b("<!> <!>",1),jt=b('<p class="text-2xl font-bold"> <span class="text-sm text-muted-foreground"> </span></p>'),qt=b("<!> <!>",1),zt=b("<!> <!>",1),Et=b('<div class="space-y-2"><p class="text-sm text-muted-foreground"><strong> </strong> </p> <p class="text-sm text-muted-foreground"><strong> </strong> <!></p> <p class="text-sm text-muted-foreground"><strong> </strong> </p></div>'),Gt=b("<!> <!>",1),Jt=b('<div class="lg:p-8"><!> <div class="mb-8"><h1 class="text-2xl font-bold mb-4"> </h1> <div class="grid grid-cols-1 sm:grid-cols-2 gap-4"><!> <!></div></div> <div class="space-y-4"></div></div>');function ar(dt,vt){Tt(vt,!0);const it=Ct(),g=()=>wt(Ft,"$t",it);let M=Y(q([])),F=Y(null),R=Y(null);const ct=lt.transactions,ut=lt.customers;async function $t(){if(!t(R))return;const a=ct.filter(r=>r.customerId===t(R));Z(M,q(a.sort((r,x)=>new Date(x.timestamp).getTime()-new Date(r.timestamp).getTime())))}async function mt(){t(R)&&Z(F,q(ut.find(a=>a.id===t(R))??null))}let pt=j(()=>t(M).filter(a=>a.status==="Completed").reduce((a,r)=>a+r.amount,0)),_t=j(()=>t(M).length),ft=j(()=>t(M).filter(a=>a.status==="Pending").length);Dt(()=>{{const a=new URLSearchParams(window.location.search);Z(R,q(a.get("id"))),$t(),mt()}});var K=Jt(),tt=n(K);{var gt=a=>{var r=Mt(),x=n(r),U=n(x,!0);v(()=>o(U,g()("transactions.customerDetails"))),e(x);var D=l(x,2);c(D,()=>z,(N,I)=>{I(N,{children:(S,y)=>{var p=Lt(),B=A(p);c(B,()=>G,(u,m)=>{m(u,{children:(C,h)=>{var $=It(),i=A($);c(i,()=>J,(T,_)=>{_(T,{children:(P,f)=>{L();var k=H();v(()=>o(k,`${t(F).name??""} ${t(F).surname??""}`)),s(P,k)},$$slots:{default:!0}})});var w=l(i,2);c(w,()=>nt,(T,_)=>{_(T,{children:(P,f)=>{L();var k=H();v(()=>o(k,t(F).email)),s(P,k)},$$slots:{default:!0}})}),s(C,$)},$$slots:{default:!0}})});var d=l(B,2);c(d,()=>E,(u,m)=>{m(u,{children:(C,h)=>{var $=Ht(),i=n($),w=n(i),T=n(w);v(()=>o(T,`${g()("customers.phoneNumber")??""}:`)),e(w);var _=l(w);e(i);var P=l(i,2),f=n(P),k=n(f);v(()=>o(k,`${g()("customers.address")??""}:`)),e(f);var V=l(f);e(P),e($),v(()=>{o(_,` ${(t(F).phoneNumber||"N/A")??""}`),o(V,` ${(t(F).address||"N/A")??""}`)}),s(C,$)},$$slots:{default:!0}})}),s(S,p)},$$slots:{default:!0}})}),e(r),s(a,r)};Nt(tt,a=>{t(F)&&a(gt)})}var O=l(tt,2),Q=n(O),xt=n(Q,!0);v(()=>o(xt,g()("transactions.transactionHistory"))),e(Q);var rt=l(Q,2),st=n(rt);c(st,()=>z,(a,r)=>{r(a,{children:(x,U)=>{var D=Ut(),N=A(D);c(N,()=>G,(S,y)=>{y(S,{children:(p,B)=>{var d=X(),u=A(d);c(u,()=>J,(m,C)=>{C(m,{children:(h,$)=>{L();var i=H();v(()=>o(i,g()("transactions.totalSpent"))),s(h,i)},$$slots:{default:!0}})}),s(p,d)},$$slots:{default:!0}})});var I=l(N,2);c(I,()=>E,(S,y)=>{y(S,{children:(p,B)=>{var d=Rt(),u=n(d);v(()=>o(u,`€${t(pt).toFixed(2)??""}`)),e(d),s(p,d)},$$slots:{default:!0}})}),s(x,D)},$$slots:{default:!0}})});var ht=l(st,2);c(ht,()=>z,(a,r)=>{r(a,{children:(x,U)=>{var D=qt(),N=A(D);c(N,()=>G,(S,y)=>{y(S,{children:(p,B)=>{var d=X(),u=A(d);c(u,()=>J,(m,C)=>{C(m,{children:(h,$)=>{L();var i=H();v(()=>o(i,g()("transactions.totalTransactions"))),s(h,i)},$$slots:{default:!0}})}),s(p,d)},$$slots:{default:!0}})});var I=l(N,2);c(I,()=>E,(S,y)=>{y(S,{children:(p,B)=>{var d=jt(),u=n(d),m=l(u),C=n(m);e(m),e(d),v(()=>{o(u,`${t(_t)??""} `),o(C,`(${t(ft)??""} pending)`)}),s(p,d)},$$slots:{default:!0}})}),s(x,D)},$$slots:{default:!0}})}),e(rt),e(O);var et=l(O,2);kt(et,21,()=>t(M),At,(a,r)=>{var x=X(),U=A(x);c(U,()=>z,(D,N)=>{N(D,{children:(I,S)=>{var y=Gt(),p=A(y);c(p,()=>G,(d,u)=>{u(d,{children:(m,C)=>{var h=zt(),$=A(h);c($,()=>J,(w,T)=>{T(w,{children:(_,P)=>{L();var f=H();v(()=>o(f,`Transaction #${t(r).id??""}`)),s(_,f)},$$slots:{default:!0}})});var i=l($,2);c(i,()=>nt,(w,T)=>{T(w,{children:(_,P)=>{L();var f=H();v(()=>o(f,t(r).description)),s(_,f)},$$slots:{default:!0}})}),s(m,h)},$$slots:{default:!0}})});var B=l(p,2);c(B,()=>E,(d,u)=>{u(d,{children:(m,C)=>{var h=Et(),$=n(h),i=n($),w=n(i);v(()=>o(w,`${g()("transactions.amount")??""}:`)),e(i);var T=l(i);v(()=>o(T,` €${t(r).amount.toFixed(2)??""}`)),e($);var _=l($,2),P=n(_),f=n(P);v(()=>o(f,`${g()("transactions.status")??""}:`)),e(P);var k=l(P,2),V=j(()=>`ml-2 ${t(r).status===g()("status.completed")?"bg-custom-green hover:bg-custom-green/80":t(r).status===g()("status.pending")?"bg-custom-yellow hover:bg-custom-yellow/80":t(r).status===g()("status.failed")?"bg-custom-red hover:bg-custom-red/80":""}`);Bt(k,{get class(){return t(V)},variant:"secondary",children:(yt,Kt)=>{L();var ot=H();v(()=>o(ot,t(r).status)),s(yt,ot)},$$slots:{default:!0}}),e(_);var at=l(_,2),W=n(at),Pt=n(W);v(()=>o(Pt,`${g()("transactions.date")??""}:`)),e(W);var bt=l(W);e(at),e(h),v(()=>o(bt,` ${t(r).timestamp??""}`)),s(m,h)},$$slots:{default:!0}})}),s(I,y)},$$slots:{default:!0}})}),s(a,x)}),e(et),e(K),s(dt,K),St()}export{ar as component};
